<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ú©Ø§Ù…Ù„ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ Ø³ÛŒØ³ØªÙ… Ø§Ù†Ø¨Ø§Ø±Ø¯Ø§Ø±ÛŒ</title>
    <script src="https://cdn.jsdelivr.net/npm/persian-date@latest/dist/persian-date.min.js"></script>
    <style>
        body {
            font-family: 'Tahoma', sans-serif;
            direction: rtl;
            padding: 20px;
            background: #f5f5f5;
            margin: 0;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .success { color: green; }
        .error { color: red; }
        .date-display {
            background: #e8f5e8;
            padding: 10px;
            border-radius: 4px;
            margin: 5px 0;
            font-weight: bold;
        }
        .invoice-preview {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            background: #f9f9f9;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ ØªØ³Øª Ú©Ø§Ù…Ù„ Ø³ÛŒØ³ØªÙ… ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ</h1>
        <p><strong>ÙˆØ¶Ø¹ÛŒØª Ø³Ø±ÙˆØ±:</strong> <span class="success">âœ… ÙØ¹Ø§Ù„</span> - Ù¾ÙˆØ±Øª 8006</p>
        <p><strong>Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Persian Date:</strong> <span id="library-status"></span></p>
        <p><strong>Ø³ÛŒØ³ØªÙ… Ø§ØµÙ„ÛŒ:</strong> <a href="index.html" target="_blank">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³ÛŒØ³ØªÙ… Ø§Ù†Ø¨Ø§Ø±Ø¯Ø§Ø±ÛŒ</a></p>
    </div>

    <div class="container">
        <h2>ğŸ“… ØªØ³Øª ØªÙˆØ§Ø¨Ø¹ ØªØ§Ø±ÛŒØ®</h2>
        <div id="function-tests"></div>
    </div>

    <div class="container">
        <h2>ğŸ“‹ Ù†Ù…ÙˆÙ†Ù‡ ÙØ§Ú©ØªÙˆØ± Ø¨Ø§ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ</h2>
        <div id="invoice-preview"></div>
    </div>

    <script>
        // ØªØ§Ø¨Ø¹ formatPersianDate (Ù‡Ù…Ø§Ù†Ù†Ø¯ Ø³ÛŒØ³ØªÙ… Ø§ØµÙ„ÛŒ)
        function formatPersianDate(dateString) {
            if (!dateString) return new Date().toLocaleDateString('fa-IR');
            const date = new Date(dateString);
            return date.toLocaleDateString('fa-IR');
        }

        // ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ ØªØ§Ø¨Ø¹
        const testCases = [
            { input: '2024-12-01', desc: 'ØªØ§Ø±ÛŒØ® Ø¯Ø³Ø§Ù…Ø¨Ø± 2024' },
            { input: '2024-01-15', desc: 'ØªØ§Ø±ÛŒØ® Ú˜Ø§Ù†ÙˆÛŒÙ‡ 2024' },
            { input: new Date().toISOString().split('T')[0], desc: 'ØªØ§Ø±ÛŒØ® Ø§Ù…Ø±ÙˆØ² (ISO)' },
            { input: null, desc: 'Ø¨Ø¯ÙˆÙ† ØªØ§Ø±ÛŒØ® (Ø§Ù…Ø±ÙˆØ²)' }
        ];

        function runTests() {
            const results = testCases.map(test => {
                const result = formatPersianDate(test.input);
                return `
                    <div class="date-display">
                        <strong>${test.desc}:</strong> ${result}
                    </div>
                `;
            }).join('');

            document.getElementById('function-tests').innerHTML = results;
        }

        function checkLibrary() {
            const status = typeof PersianDate !== 'undefined' ? 
                '<span class="success">âœ… Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù‡</span>' : 
                '<span class="error">âŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†Ø´Ø¯Ù‡</span>';
            document.getElementById('library-status').innerHTML = status;
        }

        function showInvoicePreview() {
            const sampleInvoices = [
                {
                    id: 1,
                    date: '2024-12-01',
                    items: [
                        { name: 'Ú©ÙØ´ Ú©ØªØ§Ù†ÛŒ Ø²Ù†Ø§Ù†Ù‡ ÙˆØ±Ø²Ø´ÛŒ', color: 'Ø³ÙÛŒØ¯', quantity: 5 },
                        { name: 'Ú©ÙØ´ Ù…Ø¬Ù„Ø³ÛŒ Ù¾Ø§Ø´Ù†Ù‡ Ø¨Ù„Ù†Ø¯', color: 'Ø³ÛŒØ§Ù‡', quantity: 3 }
                    ]
                },
                {
                    id: 2,
                    date: '2024-11-25',
                    items: [
                        { name: 'ØµÙ†Ø¯Ù„ ØªØ§Ø¨Ø³ØªØ§Ù†ÛŒ', color: 'Ø±Ù†Ú¯Ø§Ø±Ù†Ú¯', quantity: 10 }
                    ]
                }
            ];

            const invoiceHTML = sampleInvoices.map(invoice => `
                <div class="invoice-preview">
                    <h3>ÙØ§Ú©ØªÙˆØ± ÙˆØ±ÙˆØ¯ÛŒ #${invoice.id}</h3>
                    <p><strong>ØªØ§Ø±ÛŒØ®:</strong> ${formatPersianDate(invoice.date)}</p>
                    <p><strong>Ù…Ø­ØµÙˆÙ„Ø§Øª:</strong></p>
                    <ul>
                        ${invoice.items.map(item => 
                            `<li>${item.name} - ${item.color} (${item.quantity} Ø¹Ø¯Ø¯)</li>`
                        ).join('')}
                    </ul>
                </div>
            `).join('');

            document.getElementById('invoice-preview').innerHTML = invoiceHTML;
        }

        // Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§
        document.addEventListener('DOMContentLoaded', function() {
            checkLibrary();
            runTests();
            showInvoicePreview();
            
            console.log('ğŸ¯ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯');
            console.log('ğŸ“… ØªØ§Ø±ÛŒØ® Ø§Ù…Ø±ÙˆØ²:', formatPersianDate(null));
        });
    </script>
</body>
</html>